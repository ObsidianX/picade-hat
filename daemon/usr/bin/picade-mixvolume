#!/bin/bash

if ! command -v amixer > /dev/null; then
    echo "amixer not found. Try sudo apt-get install alsa-utils" && exit 1
fi

VAL=$(amixer get 'Master' 2> /dev/null | grep -E -m 1 -e 't: Playback [0-9+-]+' | grep -E -o -e '[0-9-]+%')

declare -i NEW=0

if [[ "$1" == "+" ]] && [[ "$VAL" != "100%" ]]; then
    NEW=($(echo "$VAL" | rev | cut -c 2- | rev)+5)
    amixer set 'Master' $NEW%
elif [[ "$1" == "-" ]] && [[ "$VAL" != "0%" ]]; then
    NEW=($(echo "$VAL" | rev | cut -c 2- | rev)-5)
    if [[ $NEW -gt 0 ]]; then
        amixer set 'Master' $NEW%
    fi
fi

echo "$VAL"

exit 0
